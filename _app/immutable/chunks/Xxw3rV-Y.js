import"./DsnmJJEf.js";import{y as dt,z as ue,H as Gt,b2 as Fe,b as He,E as Le,b3 as We,P as Ue,F as Ye,O as de,N as Jt,U as qe,aW as Xe,p as oe,o as ye,a9 as be,f as yt,g as v,ae as U,b4 as we,a as ne,c as Ve,r as je,t as Ge,a8 as fe,_ as Je,h as pe,i as ge,$ as Qt,s as Ft}from"./B6VzesFS.js";import{b as Qe,c as Dt,a as ft,f as ie}from"./CLZteyii.js";import{B as Ze,i as Ht}from"./dJn3W92j.js";import{b as Zt,c as $e,e as to}from"./zElL5l1S.js";import{s as Wt}from"./s-uEAbIx.js";import{b as eo}from"./CcEjjSwD.js";import{b as $t}from"./CqwTLdW9.js";import{p as y,r as oo}from"./Bfps1jlS.js";import{g as no}from"./CqkleIqs.js";function te(x,e,i,s,u,T){let _=dt;dt&&ue();var m=null;dt&&Gt.nodeType===Fe&&(m=Gt,ue());var A=dt?Gt:x,V=new Ze(A,!1);He(()=>{const H=e()||null;var R=H==="svg"?We:null;if(H===null){V.ensure(null,null);return}return V.ensure(H,k=>{if(H){if(m=dt?m:R?document.createElementNS(R,H):document.createElement(H),Qe(m,m),s){dt&&eo(H)&&m.append(document.createComment(""));var it=dt?Ue(m):m.appendChild(Ye());dt&&(it===null?de(!1):Jt(it)),s(m,it)}qe.nodes.end=m,k.before(m)}dt&&Jt(k)}),()=>{}},Le),Xe(()=>{}),_&&(de(!0),Jt(A))}var Ut={exports:{}};var io=Ut.exports,me;function ro(){return me||(me=1,(function(x,e){(function(i,s){x.exports=s()})(io,function(){function i(){return i=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)({}).hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},i.apply(null,arguments)}function s(t){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(t)}var u={capture:!1,passive:!1},T=/\s+/g;function _(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var m=_(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),A=_(/Edge/i),V=_(/safari/i)&&!_(/chrome/i)&&!_(/android/i),H=(function(){var t=!1;return document.addEventListener("checkIfSupportPassive",null,{get passive(){return t=!0,!0}}),t})();function R(t,n,o){window.addEventListener?t.addEventListener(n,o,!(!H&&m)&&u):window.attachEvent?t.attachEvent("on"+n,o):t["on"+n]=o}function k(t,n,o){window.removeEventListener?t.removeEventListener(n,o,!(!H&&m)&&u):window.detachEvent?t.detachEvent("on"+n,o):t["on"+n]=null}function it(){return document.scrollingElement||document.documentElement}function L(t,n,o){if(t.getBoundingClientRect||t===window){var r,l,a,h,c,f,M;if(t!==window&&t.parentNode&&t!==it()?(l=(r=t.getBoundingClientRect()).top,a=r.left,h=r.bottom,c=r.right,f=r.height,M=r.width):(l=0,a=0,h=window.innerHeight,c=window.innerWidth,f=window.innerHeight,M=window.innerWidth),n&&t!==window){o=o||t.parentNode;do if(o&&o.getBoundingClientRect){var I=o.getBoundingClientRect();l-=I.top+parseInt(E(o,"border-top-width")),a-=I.left+parseInt(E(o,"border-left-width")),h=l+r.height,c=a+r.width;break}while(o=o.parentNode)}return{top:l,left:a,bottom:h,right:c,width:M,height:f}}}function bt(t,n,o,r){if(t){o=o||document;do{if(n!=null&&(n[0]===">"?t.parentNode===o&&_t(t,n):_t(t,n))||r&&t===o)return t;if(t===o)break}while(t=t.parentNode);return null}}function Ct(t,n){if(!t||!n)return!1;if(n.compareDocumentPosition)return!!(16&n.compareDocumentPosition(t));if(n.contains&&t.nodeType===1)return n.contains(t)&&n!==t;for(;t=t.parentNode;)if(t===n)return!0;return!1}function Ot(t,n){for(var o=t.lastElementChild;o&&(o===C.ghost||E(o,"display")==="none"||n);)o=o.previousElementSibling;return o||null}function ct(t,n){if(!t||!t.parentNode)return-1;for(var o=0;t=t.previousElementSibling;)t===C.ghost||t.nodeName.toUpperCase()==="TEMPLATE"||E(t,"display")==="none"||n&&!_t(t,n)||o++;return o}function Mt(t,n,o,r){for(var l=0,a=0,h=t.children;l<h.length;){if(h[l]!==C.ghost&&E(h[l],"display")!=="none"&&bt(h[l],o,t,!1)&&h[l]!==C.dragged){if(a===n)return h[l];a++}l++}return null}function Nt(t,n){var o=E(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),l=Mt(t,0,n),a=Mt(t,1,n),h=l&&E(l),c=a&&E(a),f=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+L(l).width,M=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+L(a).width,I=A||m?"cssFloat":"float";if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&h.float&&h.float!=="none"){var D=h.float==="left"?"left":"right";return!a||c.clear!=="both"&&c.clear!==D?"horizontal":"vertical"}return l&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||f>=r&&o[I]==="none"||a&&o[I]==="none"&&f+M>r)?"vertical":"horizontal"}function rt(t,n,o){if(t&&n)if(t.classList)t.classList[o?"add":"remove"](n);else{var r=(" "+t.className+" ").replace(T," ").replace(" "+n+" "," ");t.className=(r+(o?" "+n:"")).replace(T," ")}}function _t(t,n){if(n){if(n[0]===">"&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch{return!1}return!1}}function E(t,n,o){var r=t&&t.style;if(r){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),n===void 0?o:o[n];n in r||n.indexOf("webkit")!==-1||(n="-webkit-"+n),r[n]=o+(typeof o=="string"?"":"px")}}function kt(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}function Rt(t,n){var o,r,l=(r=n,(o=t).compareDocumentPosition?o.compareDocumentPosition(r):o.contains?(o!=r&&o.contains(r)&&16)+(o!=r&&r.contains(o)&&8)+(o.sourceIndex>=0&&r.sourceIndex>=0?(o.sourceIndex<r.sourceIndex&&4)+(o.sourceIndex>r.sourceIndex&&2):1):0);return l===2?1:l===4?-1:0}function It(t){t.preventDefault!==void 0&&t.cancelable&&t.preventDefault()}function j(t){var n=t.sortable,o=t.name,r=t.evt,l=n.options[o];if(typeof l=="function")return l(i({},r))}function wt(t){if(typeof t=="function"){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.apply(void 0,o)}return t}var G="Sortable"+Date.now();function At(t){this.options=t,this.scrollEl=null,this.autoScrollInterval=null}function Pt(t){this.options=t,this.animationStack=[],this.animationCallbackId=null}function Kt(t,n){return Math.sqrt(Math.pow(t.left-n.left,2)+Math.pow(t.top-n.top,2))}At.prototype={nulling:function(){this.autoScrollInterval&&(clearInterval(this.autoScrollInterval),this.autoScrollInterval=null)},onStarted:function(){this.nulling(),this.autoScrollInterval=setInterval(this.autoScroll.bind(this))},onMove:function(t,n,o,r){var l=o?o[G].options:r;!o||l.autoScroll?(this.options=l,this.scrollEl=(function(a,h){if(!a||!a.getBoundingClientRect)return it();var c=a;do if(c.clientWidth<c.scrollWidth||c.clientHeight<c.scrollHeight){var f=E(c);if(c.clientWidth<c.scrollWidth&&(f.overflowX=="auto"||f.overflowX=="scroll")||c.clientHeight<c.scrollHeight&&(f.overflowY=="auto"||f.overflowY=="scroll"))return!c.getBoundingClientRect||c===document.body?it():c}while(c=c.parentNode);return it()})(t),this.moveEvent=n):this.scrollEl=null},autoScroll:function(){var t=this.options,n=this.moveEvent,o=this.scrollEl,r=t.scrollThreshold,l=t.scrollSpeed;if(o&&n.clientX!==void 0&&n.clientY!==void 0){var a=L(o);if(a){var h=n.clientX,c=n.clientY,f=a.top,M=a.right,I=a.bottom,D=a.left,O=a.height,q=a.width;if(!(c<f||h>M||c>I||h<D)){var lt=o.scrollTop,K=o.scrollLeft,et=o.scrollHeight,St=o.scrollWidth;o.scrollLeft+=this.getScrollOffset(h,D,M,r,l.x,K,St,q),o.scrollTop+=this.getScrollOffset(c,f,I,r,l.y,lt,et,O)}}}},getScrollOffset:function(t,n,o,r,l,a,h,c){return a>0&&t>=n&&t<=n+r?Math.max(-1,(t-n)/r-1)*l:a+c<h&&t<=o&&t>=o-r?Math.min(1,(t-o)/r+1)*l:0}},Pt.prototype={collect:function(t){if(t){for(var n=L(t),o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=Math.min(n.right,o),a=Math.min(n.bottom,r),h=Array.prototype.slice.call(t.children),c=[],f=0,M=h.length;f<M;f++){var I=h[f];if(I!==C.ghost&&E(I,"display")!=="none"){var D=L(I);if(!(D.bottom<0||D.right<0)){if(c.length===0&&I.previousElementSibling){var O=I.previousElementSibling;do if(O&&O!==C.ghost&&E(O,"display")!=="none")break;while(O=O.previousElementSibling);O&&c.push({el:O,rect:L(O)})}if(D.top-D.height>a||D.left-D.width>l){c.push({el:I,rect:D});break}c.push({el:I,rect:D})}}}this.animationStack.push(c)}},animate:function(t){var n=this,o=this.animationStack.pop(),r=this.options.animation;if(!o||!r)return clearTimeout(this.animationCallbackId),void(typeof t=="function"&&t());var l=0;o.forEach(function(a){var h=0,c=a.el,f=L(c),M=a.rect,I=c.prevToRect,D=c.prevFromRect;if(c.animating&&D&&I&&kt(M,f)){var O=(function(q,lt){var K="";if(typeof q=="string")K=q;else do{var et=E(q,"transform");et&&et!=="none"&&(K=et+" "+K)}while(!1);var St=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return St&&new St(K)})(c);O&&(h=Kt({top:f.top-O.f,left:f.left-O.e},f)/Kt(D,I)*r)}kt(M,f)||(c.prevFromRect=M,c.prevToRect=f,h||(h=r),n.execute(c,M,f,h)),h&&(l=Math.max(l,h))}),clearTimeout(this.animationCallbackId),l?this.animationCallbackId=setTimeout(function(){typeof t=="function"&&t()},l):typeof t=="function"&&t()},execute:function(t,n,o,r){var l=this.options.easing||"",a=n.left-o.left,h=n.top-o.top;E(t,"transition",""),E(t,"transform","translate3d(".concat(a,"px, ").concat(h,"px, 0)")),this.repaintDummy=(function(c){return c.offsetWidth})(t),E(t,"transition","transform ".concat(r,"ms ").concat(l)),E(t,"transform","translate3d(0px, 0px, 0px)"),typeof t.animating=="number"&&clearTimeout(t.animating),t.animating=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.prevFromRect=null,t.prevToRect=null,t.animating=null},r)}};var ht,F,S,b,pt,P,g,p,B,N,Q,st,Tt,gt,Y,Z,mt,J,$,ut,tt,Et=[];function vt(t){var n,o,r,l={},a=t.group;a&&s(a)==="object"||(a={name:a,pull:!0,put:!0,revertDrag:!0}),l.name=a.name,l.pull=(n=a.pull)===null||n===void 0||n,l.put=(o=a.put)===null||o===void 0||o,l.revertDrag=(r=a.revertDrag)===null||r===void 0||r,t.group=l}function C(t,n){if(!t||!t.nodeType||t.nodeType!==1)throw"Sortable-dnd: `el` must be an HTMLElement, not ".concat({}.toString.call(t));t[G]=this,this.el=t,this.options=n=i({},n);var o={store:null,group:"",handle:null,draggable:">*",sortable:!0,disabled:!1,customGhost:null,lockAxis:"",direction:"",animation:150,easing:"",chosenClass:"",placeholderClass:"",ghostClass:"",ghostStyle:{},ghostContainer:null,appendToBody:!1,autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,swapOnDrop:!0,removeCloneOnDrop:!0,dropOnAnimationEnd:!1,supportTouch:"ontouchstart"in window,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,emptyInsertThreshold:-1};for(var r in o)!(r in n)&&(n[r]=o[r]);for(var l in vt(n),this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));R(t,n.supportTouch?"touchstart":"mousedown",this._onDrag),this.autoScroller=new At(n),this.animator=new Pt(n),Et.push(t)}return C.prototype={constructor:C,_onDrag:function(t){var n=this,o=this.el,r=this.options,l=r.handle,a=t.touches&&t.touches[0],h=(a||t).target,c=o.ownerDocument;if(!S&&!r.disabled&&r.group.pull&&!(/mousedown|pointerdown/.test(t.type)&&t.button!==0||V&&h&&h.tagName.toUpperCase()==="SELECT")){var f=bt(h,r.draggable,o);f&&!f.animating&&(Y={event:t,clientX:(a||t).clientX,clientY:(a||t).clientY},S=f,R(J=a?S:document,"mouseup",this._onDrop),R(J,"touchend",this._onDrop),R(J,"touchcancel",this._onDrop),typeof l=="function"&&!l(t)||typeof l=="string"&&!bt(h,l,S)||(!r.delay||r.delayOnTouchOnly&&!a||A||m?this._onStart(a,t):(R(c,"touchmove",this._delayedMoveHandler),R(c,"mousemove",this._delayedMoveHandler),R(c,"mouseup",this._cancelStart),R(c,"touchend",this._cancelStart),R(c,"touchcancel",this._cancelStart),this._dragStartTimer=setTimeout(function(){return n._onStart(a,t)},r.delay))))}},_delayedMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-Y.clientX),Math.abs(n.clientY-Y.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),k(t,"touchmove",this._delayedMoveHandler),k(t,"mousemove",this._delayedMoveHandler),k(t,"mouseup",this._cancelStart),k(t,"touchend",this._cancelStart),k(t,"touchcancel",this._cancelStart)},_onStart:function(t,n){It(n);var o=this.el,r=this.options,l=ct(S);st=l,Tt=l,gt=l,ht=o,F=o,P=o,B=S,N=S.parentNode,Q=r.group.pull,ut=S,$={to:o,target:S,newIndex:l,relative:0},g=S.cloneNode(!0),C.dragged=S,C.clone=g,C.active=this,j({sortable:this,name:"onChoose",evt:this._getEventProperties(n)}),rt(S,r.chosenClass,!0),R(J,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout(function(){return document.selection.empty()},0):window.getSelection().removeAllRanges()}catch{}R(document,"selectstart",It),V&&E(document.body,"user-select","none")},_onStarted:function(){var t=this.options;this.animator.collect(N),this._appendGhost(),rt(g,t.chosenClass,!0),rt(g,t.placeholderClass,!0),S.parentNode.insertBefore(g,S),E(S,"display","none"),j({sortable:this,name:"onDrag",evt:this._getEventProperties(Y.event)}),this.animator.animate(),this.autoScroller.onStarted()},_appendGhost:function(){if(!p){var t=this.options,n=t.appendToBody?document.body:wt(t.ghostContainer,this)||this.el,o=wt(t.customGhost,g)||g;rt(p=o.cloneNode(!0),t.ghostClass,!0);var r=L(S),l=i({position:"fixed",top:r.top,left:r.left,width:r.width,height:r.height,margin:0,zIndex:1e5,opacity:"0.8",overflow:"hidden",boxSizing:"border-box",transform:"",transition:"",pointerEvents:"none"},t.ghostStyle);for(var a in l)E(p,a,l[a]);C.ghost=p,n.appendChild(p);var h=(Y.clientX-r.left)/parseInt(p.style.width)*100,c=(Y.clientY-r.top)/parseInt(p.style.height)*100;E(p,"transform-origin","".concat(h,"% ").concat(c,"%")),E(p,"will-change","transform")}},_nearestSortable:function(t){It(t);var n=t.touches&&t.touches[0]||t;if(S&&(function(O){var q=Z||Y;return!(O.clientX!==void 0&&O.clientY!==void 0&&Math.abs(O.clientX-q.clientX)<=0&&Math.abs(O.clientY-q.clientY)<=0)})(n)){!Z&&this._onStarted();var o=this.options.lockAxis,r=o==="x"?Y.clientX:n.clientX,l=o==="y"?Y.clientY:n.clientY,a=document.elementFromPoint(r,l),h=r-Y.clientX,c=l-Y.clientY;Z={event:t,clientX:r,clientY:l},E(p,"transform","translate3d(".concat(h,"px, ").concat(c,"px, 0)"));var f,M,I,D=(f=r,M=l,Et.reduce(function(O,q){var lt=q[G].options.emptyInsertThreshold;if(lt!=null){var K=L(q),et=f>=K.left-lt&&f<=K.right+lt,St=M>=K.top-lt&&M<=K.bottom+lt;return et&&St&&(!I||I&&K.left>=I.left&&K.right<=I.right&&K.top>=I.top&&K.bottom<=I.bottom)&&(O=q,I=K),O}},null));D&&D[G]._onMove(t,a),this.autoScroller.onMove(a,Z,D,this.options)}},_allowPut:function(){var t=this.options.group,n=P[G].options.group;return this.el===P||!!t.put&&(t.put.join&&t.put.indexOf(n.name)>-1||n.name&&t.name&&n.name===t.name)},_getDirection:function(){var t=this.options.draggable,n=this.options.direction;return n?wt(n,Z.event,g,this):Nt(N,t)},_allowSwap:function(){var t=L(b),n=this._getDirection()==="vertical",o=n?"top":"left",r=n?"bottom":"right",l=b[n?"offsetHeight":"offsetWidth"],a=n?Z.clientY:Z.clientX,h=a>=t[o]&&a<t[r]-l/2?-1:1,c=Mt(N,0,this.options.draggable),f=Ot(N),M=L(c),I=L(f);if(b===N||Ct(N,b))return g===c&&a<M[o]?(pt=b,!0):g===f&&a>I[r]&&(pt=b.nextSibling,!0);var D=Rt(g,b);return pt=D<0?b.nextSibling:b,mt!==b?(tt=h,!0):tt!==h&&(tt=h,h<0?D>0:D<0)},_onMove:function(t,n){var o=this.el,r=this.options;if(!r.disabled&&this._allowPut()){if(b=bt(n,r.draggable,o),j({sortable:this,name:"onMove",evt:this._getEventProperties(t,{target:b})}),r.sortable||o!==P)return o===F||n!==o&&Ot(o)?void(b&&!b.animating&&!Ct(b,g)&&this._allowSwap()&&(b!==g&&pt!==g&&(o!==F?this._onInsert(t):b!==S&&this._onChange(t)),mt=b)):(b=mt=null,void this._onInsert(t));F!==P&&(b=mt=S,tt=0,this._onInsert(t))}},_onInsert:function(t){var n=this.el,o=b||g,r=Q==="clone"&&n!==P&&F===P,l=Q==="clone"&&n===P&&F!==P,a=Ct(b,document),h=b===S&&!a,c=F[G],f=P[G];ht=n,st=ct(g),B=o,N=a?b.parentNode:n,c.animator.collect(g.parentNode),this.animator.collect(N),r&&($.target=ut,$.newIndex=st,$.relative=ut===S?0:Rt(g,ut),E(S,"display",""),f.options.group.revertDrag||g.parentNode.insertBefore(S,g)),l&&(st=ct(S),E(S,"display","none")),E(g,"display",h?"none":""),b&&a?N.insertBefore(g,tt<0?b:b.nextSibling):N.appendChild(g),Tt=h?gt:ct(g),r&&f.options.group.revertDrag&&($.target=S,$.newIndex=gt,$.relative=0,j({sortable:f,name:"onChange",evt:this._getEventProperties(t,{to:P,target:S,newIndex:gt,revertDrag:!0})})),r||j({sortable:c,name:"onRemove",evt:this._getEventProperties(t,{newIndex:-1})}),l&&o!==S&&(ut=o,j({sortable:this,name:"onChange",evt:this._getEventProperties(t,{from:P,backToOrigin:!0})})),l||j({sortable:this,name:"onAdd",evt:this._getEventProperties(t,{oldIndex:-1})}),c.animator.animate(),this.animator.animate(),F=n},_onChange:function(t){var n=this.el;this.animator.collect(N),st=ct(g),N=b.parentNode,B=b,n===P&&(ut=b),N.insertBefore(g,pt),Tt=ct(g),j({sortable:this,name:"onChange",evt:this._getEventProperties(t)}),this.animator.animate(),F=n},_onDrop:function(t){var n=this,o=this.options;if(this._cancelStart(),k(J,"touchmove",this._nearestSortable),k(J,"mousemove",this._nearestSortable),k(J,"mouseup",this._onDrop),k(J,"touchend",this._onDrop),k(J,"touchcancel",this._onDrop),k(document,"selectstart",It),V&&E(document.body,"user-select",""),p&&p.parentNode&&p.parentNode.removeChild(p),P)if(F=P,st=gt,B===g&&(B=S),rt(S,o.chosenClass,!1),j({sortable:this,name:"onUnchoose",evt:this._getEventProperties(t)}),Z){this.animator.collect(N),rt(g,o.chosenClass,!1),rt(g,o.placeholderClass,!1);var r=this._getEventProperties(t);!o.dropOnAnimationEnd&&this._onEnd(r),this.animator.animate(function(){o.dropOnAnimationEnd&&n._onEnd(r)})}else this._nulling();else this._nulling()},_onEnd:function(t){var n=this.options,o=Q==="clone",r=F===ht;o&&!r||!wt(n.swapOnDrop,t)||N.insertBefore(S,g),o&&!r||!wt(n.removeCloneOnDrop,t)||g&&g.parentNode&&g.parentNode.removeChild(g),E(S,"display",""),F!==ht&&j({sortable:F[G],name:"onDrop",evt:i({},t,o?$:{newIndex:-1})}),j({sortable:ht[G],name:"onDrop",evt:i({},t,r?{}:{oldIndex:-1})}),this._nulling()},_getEventProperties:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o={};return o.event=t,o.to=ht,o.from=F,o.node=S,o.clone=g,o.target=B,o.oldIndex=st,o.newIndex=Tt,o.pullMode=Q,i(o,n),o.relative=B===S?0:Rt(g,B),o},_nulling:function(){ht=F=S=b=pt=P=g=p=B=N=Q=st=Tt=gt=Y=Z=mt=J=$=ut=tt=C.clone=C.ghost=C.active=C.dragged=null,this.autoScroller.nulling()},destroy:function(){this._cancelStart(),this._nulling(),k(this.el,"touchstart",this._onDrag),k(this.el,"mousedown",this._onDrag);var t=Et.indexOf(this.el);t>-1&&Et.splice(t,1),this.el[G]=this.animator=this.autoScroller=null},option:function(t,n){if(n===void 0)return this.options[t];this.options[t]=n,this.animator.options[t]=n,this.autoScroller.options[t]=n,t==="group"&&vt(this.options)}},C.utils={on:R,off:k,css:E,index:ct,matches:_t,closest:bt,getRect:L,toggleClass:rt,detectDirection:Nt},C.get=function(t){return t[G]},C.create=function(t,n){return new C(t,n)},C})})(Ut)),Ut.exports}var so=ro();const nt=no(so);function Te(x,e){let i;const s=function(...u){i||(e<=0?x.apply(this,u):i=setTimeout(()=>{i=null,x.apply(this,u)},e))};return s.cancel=function(){i&&(clearTimeout(i),i=null)},s}function ee(x,e){const i=Te(x,e),s=function(...u){i.cancel(),i.apply(this,u)};return s.cancel=function(){i.cancel()},s}function re(x,e){return x===0&&e===0?1/x===1/e:Number.isNaN(x)&&Number.isNaN(e)?!0:x==e}function Lt(x,e){return(Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce((i,s)=>(i||{})[s],x)}function ve(x){return x instanceof Document&&x.nodeType===9||x instanceof Window}class lo{sizes;range;offset;options;scrollEl;direction;sizeType;fixedSize;averageSize;onScroll;constructor(e){this.options=e;const i={size:0,keeps:0,buffer:0,wrapper:null,scroller:null,direction:"vertical",uniqueKeys:[],debounceTime:null,throttleTime:null};for(const s in i)!(s in this.options)&&(this.options[s]=i[s]);this.sizes=new Map,this.sizeType="INIT",this.fixedSize=0,this.averageSize=0,this.range={start:0,end:0,front:0,behind:0},this.offset=0,this.direction="STATIONARY",this.updateScrollElement(),this.updateOnScrollFunction(),this.addScrollEventListener(),this.checkIfUpdate(0,e.keeps-1)}isFixed(){return this.sizeType==="FIXED"}isFront(){return this.direction==="FRONT"}isBehind(){return this.direction==="BEHIND"}isHorizontal(){return this.options.direction==="horizontal"}getSize(e){return this.sizes.get(e)||this.getItemSize()}getOffset(){const e=this.isHorizontal()?"scrollLeft":"scrollTop";return this.scrollEl[e]}getScrollSize(){const e=this.isHorizontal()?"scrollWidth":"scrollHeight";return this.scrollEl[e]}getClientSize(){const e=this.isHorizontal()?"offsetWidth":"offsetHeight";return this.scrollEl[e]}scrollToOffset(e){const i=this.isHorizontal()?"scrollLeft":"scrollTop";this.scrollEl[i]=e}scrollToIndex(e,i="top"){if(e>=this.options.uniqueKeys.length-1){this.scrollToBottom();return}if(e<0){this.scrollToOffset(0);return}const s=this.getOffset(),u=this.getClientSize(),T=this.getSize(this.options.uniqueKeys[e]),_=this.getOffsetByRange(0,e)+this.getScrollStartOffset(),m=_+T,A=s,V=s+u;if(i==="auto"){if(_>=A&&m<=V)return;i=_<A?"top":"bottom"}if(i==="top")this.scrollToOffset(_);else if(i==="bottom"){const H=Math.max(0,m-u);this.scrollToOffset(H)}}scrollToBottom(){const e=this.getScrollSize();this.scrollToOffset(e),setTimeout(()=>{this.isReachedBottom()||this.scrollToBottom()},5)}isReachedBottom(){return this.getOffset()+this.getClientSize()+1>=this.getScrollSize()}option(e,i){const s=this.options[e];this.options[e]=i,e==="uniqueKeys"&&this.sizes.forEach((u,T)=>{i.includes(T)||this.sizes.delete(T)}),e==="scroller"&&(s&&nt.utils.off(s,"scroll",this.onScroll),this.updateScrollElement(),this.addScrollEventListener())}updateRange(e){if(e){this.handleUpdate(e.start);return}let i=this.range.start;i=Math.max(i,0),this.handleUpdate(i)}updateItemSize(e,i){!i||this.sizes.get(e)===i||(this.sizes.set(e,i),this.sizeType==="INIT"?(this.sizeType="FIXED",this.fixedSize=i):this.isFixed()&&this.fixedSize!==i&&(this.sizeType="DYNAMIC",this.fixedSize=0),!this.averageSize&&this.sizeType==="DYNAMIC"&&this.sizes.size===this.options.keeps&&this.updateAverageSize())}updateAverageSize(){const e=[...this.sizes.values()].reduce((i,s)=>i+s,0);this.averageSize=Math.round(e/this.sizes.size)}addScrollEventListener(){this.options.scroller&&nt.utils.on(this.options.scroller,"scroll",this.onScroll)}removeScrollEventListener(){this.options.scroller&&nt.utils.off(this.options.scroller,"scroll",this.onScroll)}enableScroll(e){const i=this.options.scroller,s=e?nt.utils.off:nt.utils.on,u="onwheel"in document.createElement("div")?"wheel":"mousewheel";s(i,"DOMMouseScroll",this.preventDefault),s(i,u,this.preventDefault),s(i,"touchmove",this.preventDefault),s(i,"keydown",this.preventDefaultForKeyDown)}preventDefault(e){e.preventDefault()}preventDefaultForKeyDown(e){if({37:1,38:1,39:1,40:1}[e.keyCode])return this.preventDefault(e),!1}updateScrollElement(){const e=this.options.scroller;if(ve(e)){const i=document.scrollingElement||document.documentElement||document.body;this.scrollEl=i}else this.scrollEl=e}updateOnScrollFunction(){const{debounceTime:e,throttleTime:i}=this.options;e?this.onScroll=ee(()=>this.handleScroll(),e):i?this.onScroll=Te(()=>this.handleScroll(),i):this.onScroll=()=>this.handleScroll()}handleScroll(){const e=this.getOffset(),i=this.getClientSize(),s=this.getScrollSize();e===this.offset?this.direction="STATIONARY":this.direction=e<this.offset?"FRONT":"BEHIND",this.offset=e;const u=this.isFront()&&e<=0,T=this.isBehind()&&i+e+1>=s;this.options.onScroll({top:u,bottom:T,offset:e,direction:this.direction}),this.isFront()?this.handleScrollFront():this.isBehind()&&this.handleScrollBehind()}handleScrollFront(){const e=this.getScrollItems();if(e>=this.range.start)return;const i=Math.max(e-this.options.buffer,0);this.checkIfUpdate(i,this.getEndByStart(i))}handleScrollBehind(){const e=this.getScrollItems();e<this.range.start+this.options.buffer||this.checkIfUpdate(e,this.getEndByStart(e))}getScrollItems(){const e=this.offset-this.getScrollStartOffset();if(e<=0)return 0;if(this.isFixed())return Math.floor(e/this.fixedSize);let i=0,s=this.options.uniqueKeys.length,u=0,T=0;for(;i<=s;){if(u=i+Math.floor((s-i)/2),T=this.getOffsetByRange(0,u),T===e)return u;T<e?i=u+1:T>e&&(s=u-1)}return i>0?--i:0}checkIfUpdate(e,i){const s=this.options.keeps;this.options.uniqueKeys.length<=s?e=0:i-e<s-1&&(e=i-s+1),this.range.start!==e&&this.handleUpdate(e)}handleUpdate(e){const i=this.range.start!==e;this.range.start=e,this.range.end=this.getEndByStart(e),this.range.front=this.getFrontOffset(),this.range.behind=this.getBehindOffset(),this.options.onUpdate({...this.range},i)}getFrontOffset(){return this.isFixed()?this.fixedSize*this.range.start:this.getOffsetByRange(0,this.range.start)}getBehindOffset(){const e=this.range.end,i=this.getLastIndex();return this.isFixed()?(i-e)*this.fixedSize:(i-e)*this.getItemSize()}getOffsetByRange(e,i){if(e>=i)return 0;let s=0;for(let u=e;u<i;u++){const T=this.sizes.get(this.options.uniqueKeys[u]);s=s+(typeof T=="number"?T:this.getItemSize())}return s}getEndByStart(e){return Math.min(e+this.options.keeps-1,this.getLastIndex())}getLastIndex(){const{uniqueKeys:e,keeps:i}=this.options;return e.length>0?e.length-1:i-1}getItemSize(){return this.isFixed()?this.fixedSize:this.options.size||this.averageSize}getScrollStartOffset(){const{wrapper:e,scroller:i}=this.options;if(i===e)return 0;let s=0;if(i&&e){const u=this.isHorizontal()?"left":"top",T=ve(i)?nt.utils.getRect(e):nt.utils.getRect(e,!0,i);s=this.offset+T[u]}return s}}const Yt=["delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","ghostClass","ghostStyle","chosenClass","scrollSpeed","appendToBody","ghostContainer","scrollThreshold","delayOnTouchOnly","placeholderClass","dropOnAnimationEnd"],qt=["size","keeps","scroller","direction","debounceTime","throttleTime"];class ao{el;options;removeDraggedEl;virtual;sortable;sortableState;constructor(e,i){this.el=e,this.options=i,this.initVirtual(),this.initSortable()}destroy(){this.virtual.removeScrollEventListener(),this.sortable.destroy()}option(e,i){this.options[e]=i,qt.includes(e)&&this.virtual.option(e,i),Yt.includes(e)&&this.sortable.option(e,i)}call(e,...i){if(e in this.virtual){const s=this.virtual[e];if(typeof s=="function")return s.apply(this.virtual,i);throw new Error(`Property ${String(e)} is not a function on Virtual.`)}else throw new Error(`Method ${String(e)} does not exist on Virtual.`)}initVirtual(){const e=qt.reduce((i,s)=>(i[s]=this.options[s],i),{});this.virtual=new lo({...e,buffer:this.options.buffer,wrapper:this.options.wrapper,scroller:this.options.scroller,uniqueKeys:this.options.uniqueKeys,onScroll:i=>this.onScroll(i),onUpdate:(i,s)=>this.onUpdate(i,s)})}onScroll(e){this.dispatchEvent("onScroll",e)}onUpdate(e,i){this.sortableState==="dragging"&&i&&(this.removeDraggedEl=!0),this.dispatchEvent("onUpdate",e,i)}initSortable(){const e=Yt.reduce((i,s)=>(i[s]=this.options[s],i),{});this.sortable=new nt(this.el,{...e,emptyInsertThreshold:0,swapOnDrop:!1,removeCloneOnDrop:i=>i.from===i.to,onDrag:i=>this.onDrag(i),onDrop:i=>this.onDrop(i)})}onDrag(e){this.sortableState="dragging";const i=e.node.getAttribute("data-key"),s=this.getIndex(i);this.sortable.option("store",{key:i,index:s}),this.dispatchEvent("onDrag",{key:i,index:s,event:e})}onDrop(e){const{key:i,index:s}=nt.get(e.from).option("store"),u={key:i,event:e,changed:!1,oldIndex:s,newIndex:s};if(!(e.from===e.to&&e.node===e.target)){const T=this.getEventProperties(u,e);Object.assign(u,T)}this.dispatchEvent("onDrop",u),e.from===this.el&&this.removeDraggedEl&&nt.dragged?.remove(),e.from!==e.to&&nt.clone?.remove(),this.sortableState="",this.removeDraggedEl=!1}getEventProperties(e,i){const s=e.key,u=e.oldIndex,T=i.target.getAttribute("data-key");let _=-1,m=u;return i.from===i.to?(m=this.getIndex(s),_=this.getIndex(T),(m<_&&i.relative===-1||m>_&&i.relative===1)&&(_+=i.relative)):(i.from===this.el&&(m=this.getIndex(s)),i.to===this.el&&(m=-1,_=this.getIndex(T),i.relative===0?_=this.options.uniqueKeys.length:i.relative===1&&(_+=i.relative))),{changed:i.from!==i.to||_!==m,oldIndex:m,newIndex:_}}getIndex(e){if(e==null)return-1;const{uniqueKeys:i}=this.options;for(let s=0,u=i.length;s<u;s++)if(re(i[s],e))return s;return-1}dispatchEvent(e,...i){if(e in this.options){const s=this.options[e];if(typeof s=="function")return s.apply(this,i)}}}function Xt(x){return Object.keys(x).map(e=>`${e}: ${x[e]}`).join(";")}function co(x,e){oe(e,!0);let i,s;const u=U(()=>{const m=re(e.dragging,e.dataKey);return{...e.style,display:m?"none":""}});ye(()=>{i&&i.setAttribute("role","item"),typeof ResizeObserver!==void 0&&(s=new ResizeObserver(()=>{const m=e.horizontal?"offsetWidth":"offsetHeight",A=i[m];e.onResize(e.dataKey,A)}),i&&s?.observe(i))}),be(()=>{s&&(s.disconnect(),s=null)});var T=Dt(),_=yt(T);te(_,()=>e.tag,!1,(m,A)=>{$t(m,R=>i=R,()=>i),Zt(m,R=>({style:R,class:e.className,"data-key":e.dataKey}),[()=>Xt(v(u))]);var V=Dt(),H=yt(V);Wt(H,()=>e.children??we),ft(A,V)}),ft(x,T),ne()}class ho{#t=()=>{};#e=U(()=>this.#t());constructor(e,i){let s;i!==void 0&&(s=i),this.#t=()=>{try{return s}finally{s=e()}}}get current(){return v(this.#e)}}var uo=ie("<tr><td></td></tr>");function Se(x,e){oe(e,!0);let i=U(()=>({padding:"0",border:"0",[e.direction==="horizontal"?"width":"height"]:`${e.offset}px`}));var s=uo(),u=Ve(s);je(s),Ge(T=>$e(u,T),[()=>Xt(v(i))]),ft(x,s),ne()}var fo=ie("<!> <!> <!>",1),po=ie("<!> <!> <!>",1);function Io(x,e){oe(e,!0);let i=y(e,"dataKey",3,""),s=y(e,"dataSource",19,()=>[]),u=y(e,"tableMode",3,!1),T=y(e,"size",3,void 0),_=y(e,"keeps",3,30),m=y(e,"scroller",3,void 0),A=y(e,"direction",3,"vertical"),V=y(e,"debounceTime",3,0),H=y(e,"throttleTime",3,0),R=y(e,"keepOffset",3,!1),k=y(e,"delay",3,0),it=y(e,"group",3,""),L=y(e,"handle",3,""),bt=y(e,"lockAxis",3,void 0),Ct=y(e,"disabled",3,!1),Ot=y(e,"sortable",3,!0),ct=y(e,"draggable",3,'[role="item"]'),Mt=y(e,"animation",3,150),Nt=y(e,"autoScroll",3,!0),rt=y(e,"scrollSpeed",19,()=>({x:10,y:10})),_t=y(e,"ghostClass",3,""),E=y(e,"ghostStyle",19,()=>({})),kt=y(e,"chosenClass",3,""),Rt=y(e,"placeholderClass",3,""),It=y(e,"appendToBody",3,!1),j=y(e,"scrollThreshold",3,55),wt=y(e,"delayOnTouchOnly",3,!1),G=y(e,"dropOnAnimationEnd",3,!0),At=y(e,"wrapTag",3,"div"),Pt=y(e,"rootTag",3,"div"),Kt=y(e,"itemTag",3,"div"),ht=y(e,"style",19,()=>({})),F=y(e,"className",3,""),S=y(e,"wrapStyle",19,()=>({})),b=y(e,"wrapClass",3,""),pt=y(e,"itemStyle",19,()=>({})),P=y(e,"itemClass",3,""),g=oo(e,["$$slots","$$events","$$legacy","dataKey","dataSource","tableMode","size","keeps","scroller","direction","debounceTime","throttleTime","keepOffset","delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","scrollSpeed","ghostClass","ghostStyle","chosenClass","placeholderClass","appendToBody","scrollThreshold","delayOnTouchOnly","dropOnAnimationEnd","wrapTag","rootTag","itemTag","style","className","wrapStyle","wrapClass","itemStyle","itemClass","item","header","footer"]),p,B=fe(Je({start:0,end:0,front:0,behind:0})),N,Q;function st(d){return p.call("getSize",d)}function Tt(){return p.call("getOffset")}function gt(){return p.call("getClientSize")}function Y(){return p.call("getScrollSize")}function Z(d){p.call("scrollToOffset",d)}function mt(d,w){p.call("scrollToIndex",d,w)}function J(d,w){const z=tt.indexOf(d);z>-1&&p.call("scrollToIndex",z,w)}function $(){p.call("scrollToOffset",0)}function ut(){p.call("scrollToBottom")}let tt=[],Et=0,vt=0;ye(()=>{v(B).end=_()-1,C(),c()}),be(()=>{p?.destroy()}),pe(()=>{s(),ge(()=>C())});function C(){if(t(),n(Et,s().length),vt&&R()){const d=s().length-vt;d>0&&p?.call("scrollToIndex",d),vt=0}Et=s().length}function t(){tt=s().map(d=>Lt(d,i())),p?.option("uniqueKeys",tt)}function n(d,w){if(d===w)return;let z={...v(B)};d>_()&&w>d&&z.end===d-1&&p?.call("isReachedBottom")&&z.start++,p?.call("updateRange",z)}const o=(d,...w)=>{const z=g[d];z&&z.apply(null,w)};let r=fe("");const l=U(()=>({size:T(),keeps:_(),scroller:m(),direction:A(),debounceTime:V(),throttleTime:H(),delay:k(),group:it(),handle:L(),lockAxis:bt(),disabled:Ct(),sortable:Ot(),draggable:ct(),animation:Mt(),autoScroll:Nt(),ghostClass:_t(),ghostStyle:E(),chosenClass:kt(),scrollSpeed:rt(),appendToBody:It(),scrollThreshold:j(),delayOnTouchOnly:wt(),placeholderClass:Rt(),dropOnAnimationEnd:G()})),a=new ho(()=>v(l));pe(()=>{v(l),ge(()=>h())});function h(){p&&[...Yt,...qt].forEach(d=>{a.current?.[d]!==v(l)[d]&&p.option(d,v(l)[d])})}function c(){const d=[...Yt,...qt].reduce((w,z)=>(w[z]=v(l)[z],w),{});p=new ao(N,{...d,buffer:Math.round(_()/3),wrapper:Q,scroller:m()||N,uniqueKeys:tt,ghostContainer:Q,onDrag:w=>q(w),onDrop:w=>lt(w),onScroll:w=>I(w),onUpdate:(w,z)=>D(w,z)})}const f=ee(()=>{vt=s().length,o("onTop")},50),M=ee(()=>{o("onBottom")},50);function I(d){vt=0,d.top?f():d.bottom&&M()}function D(d,w){Qt(B,d,!0),w&&o("onRangeChange",v(B))}function O(d,w){if(re(d,v(r))||!p)return;const z=p.virtual.sizes.size;p.call("updateItemSize",d,w),z===_()-1&&s().length>_()&&p.call("updateRange",v(B))}const q=d=>{const{key:w,index:z}=d,ot=s()[z];Qt(r,w,!0),window.draggingItem=ot,Ot()||(p?.call("enableScroll",!1),p?.option("autoScroll",!1)),o("onDrag",{...d,item:ot})},lt=d=>{const w=window.draggingItem,{oldIndex:z,newIndex:ot}=d,Bt=[...s()],at=[...s()];z===-1?at.splice(ot,0,w):ot===-1?at.splice(z,1):(at.splice(z,1),at.splice(ot,0,w)),p.call("enableScroll",!0),p.option("autoScroll",Nt()),Qt(r,""),o("onDrop",{...d,item:w,list:at,oldList:Bt})},K=U(()=>s().slice(v(B).start,v(B).end+1)),et=U(()=>({itemElTag:u()?"tr":Kt(),wrapElTag:u()?"tbody":At(),rootElTag:u()?"table":Pt()})),St=U(()=>v(et).itemElTag),Ee=U(()=>v(et).wrapElTag),xe=U(()=>v(et).rootElTag),se=U(()=>{const{front:d,behind:w}=v(B),z=A()==="horizontal",ot=z?"auto hidden":"hidden auto",Bt=z?`0px ${w}px 0px ${d}px`:`${d}px 0px ${w}px`,at={...ht(),overflow:u()||m()?"":ot},Vt={...S(),padding:u()?"":Bt};return{rootElStyle:at,wrapElStyle:Vt}}),_e=U(()=>v(se).rootElStyle),Ie=U(()=>v(se).wrapElStyle);var ze={getSize:st,getOffset:Tt,getClientSize:gt,getScrollSize:Y,scrollToOffset:Z,scrollToIndex:mt,scrollToKey:J,scrollToTop:$,scrollToBottom:ut},le=Dt(),De=yt(le);return te(De,()=>v(xe),!1,(d,w)=>{$t(d,X=>N=X,()=>N),Zt(d,X=>({style:X,class:F()}),[()=>Xt(v(_e))]);var z=po(),ot=yt(z);{var Bt=X=>{var xt=Dt(),zt=yt(xt);Wt(zt,()=>e.header),ft(X,xt)};Ht(ot,X=>{e.header&&X(Bt)})}var at=Ft(ot,2);te(at,()=>v(Ee),!1,(X,xt)=>{$t(X,W=>Q=W,()=>Q),Zt(X,W=>({class:b(),style:W}),[()=>Xt(v(Ie))]);var zt=fo(),ae=yt(zt);{var Oe=W=>{Se(W,{get offset(){return v(B).front},get direction(){return A()}})};Ht(ae,W=>{u()&&W(Oe)})}var ce=Ft(ae,2);to(ce,19,()=>v(K),W=>Lt(W,i()),(W,jt,Re)=>{{let Be=U(()=>Lt(v(jt),i())),ke=U(()=>A()==="horizontal");co(W,{get tag(){return v(St)},get style(){return pt()},get className(){return P()},get dataKey(){return v(Be)},get dragging(){return v(r)},get horizontal(){return v(ke)},onResize:O,children:(Ae,go)=>{var he=Dt(),Pe=yt(he);{let Ke=U(()=>({item:v(jt),index:v(Re)+v(B).start,key:Lt(v(jt),i())}));Wt(Pe,()=>e.item??we,()=>v(Ke))}ft(Ae,he)},$$slots:{default:!0}})}});var Me=Ft(ce,2);{var Ne=W=>{Se(W,{get offset(){return v(B).behind},get direction(){return A()}})};Ht(Me,W=>{u()&&W(Ne)})}ft(xt,zt)});var Vt=Ft(at,2);{var Ce=X=>{var xt=Dt(),zt=yt(xt);Wt(zt,()=>e.footer),ft(X,xt)};Ht(Vt,X=>{e.footer&&X(Ce)})}ft(w,z)}),ft(x,le),ne(ze)}export{Io as VirtualList,Io as default};
